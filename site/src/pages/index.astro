---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import SectionTitle from '../components/SectionTitle.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { projects } from '../data/projects';
import { certificates } from '../data/certificates';

// Show all projects marked featured
const featuredProjects = projects.filter((p: any) => p.featured);

// If none are flagged (safety), fall back to the first 3.
const safeFeatured = featuredProjects.length ? featuredProjects : projects.slice(0, 3);

const projectCount = projects.length;
const certCount = certificates.length;
---

<BaseLayout title="Home - Portfolio">
  <Hero />

  <!-- Featured Projects Section -->
  <section id="projects" class="section-container bg-white dark:bg-gray-900">
    <SectionTitle 
      title="Featured Projects" 
      subtitle="Some of my recent work that I'm proud of"
    />

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {safeFeatured.map(project => (
        <ProjectCard {...project} category={project.category} />
      ))}
    </div>

    <div class="text-center mt-12">
      <a href="/projects" class="btn-primary inline-flex items-center gap-2">
        View All Projects
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
        </svg>
      </a>
    </div>
  </section>

  <!-- About Preview Section -->
  <section class="section-container bg-gray-50 dark:bg-gray-800">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      <div>
        <h2 class="text-3xl font-bold mb-4">About Me</h2>
        <div class="space-y-4 text-gray-600 dark:text-gray-400">
          <p>
            I'm a full-stack developer who thrives on building tools that are both
            practical and creative. From AI-powered bots to game AI experiments
            to automation pipelines for streamers.
          </p>
          <p>
            Most of my work lives at the intersection of <span class="font-medium">automation,
            AI, and design</span>. I’ve built Twitch/TikTok clip editors, Snake AI agents,
            and low-level parsers like a Windows PE file analyzer.
          </p>
          <p>
            What drives me is curiosity. I enjoy digging deep into systems, finding elegant
            solutions, and constantly pushing myself to learn new technologies.
          </p>
        </div>
        <a href="/about" class="btn-secondary inline-block mt-6">
          Learn More About Me
        </a>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div class="card p-6 text-center">
          <div class="text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2">{projectCount}+</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Projects Completed</div>
        </div>
        <div class="card p-6 text-center">
          <div class="text-4xl font-bold text-purple-600 dark:text-purple-400 mb-2">{certCount}+</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Certifications</div>
        </div>
        <div class="card p-6 text-center">
          <div class="text-4xl font-bold text-green-600 dark:text-green-400 mb-2">3+</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Years Experience</div>
        </div>
        <div class="card p-6 text-center">
		<div class="text-4xl font-bold text-orange-600 dark:text-orange-400 mb-2">⚡</div>
		<div class="text-sm text-gray-600 dark:text-gray-400">Automation Enthusiast</div>
		</div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section-container bg-gradient-to-br from-blue-600 to-purple-600 text-white">
    <div class="text-center max-w-3xl mx-auto">
      <h2 class="text-3xl sm:text-4xl font-bold mb-4">Let's Work Together</h2>
      <p class="text-lg mb-8 text-blue-100">
        I'm always interested in hearing about new projects and opportunities.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href="https://mail.google.com/mail/?view=cm&fs=1&to=rwylieg@gmail.com&su=Hello%20Wylie"
          target="_blank" rel="noopener"
          class="px-8 py-3 bg-white text-blue-600 rounded-lg font-medium hover:bg-gray-100 transition-colors"
        >
          Get In Touch
        </a>
        <a href="/resume" class="px-8 py-3 bg-transparent border-2 border-white text-white rounded-lg font-medium hover:bg-white/10 transition-colors">
          View Resume
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
